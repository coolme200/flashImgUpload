<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>无标题页</title>
	<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="swfobject.js"></script>
</head>
<body onload="showFlash()">

	<div id="">
		<div id="divFlash">加载中...</div>
	</div>
	
	<script type="text/javascript">
			function showFlash() {
				var params = {
					serverUrl: "saveImage.aspx",
					jsFunction: "flashReturn",
					imgWidth:500,
					imgHeight:500,
					imgQuality:80,
					btnText:'图 片'
				}
				swfobject.embedSWF("imgZipUpload.swf", "divFlash", "100", "30", "10.0.0", "expressInstall.swf", params);
			}

			function flashReturn(type, str) {
				if(type == 'error') {
					alert(str);
				}
				else if (type == 'complete'){
				  $('<div style="float:left;width:100px; height:100px; margin:16px;position:relative;" class="img-box"><a href="javascript:void(0)" style="display:none;position:absolute;right:2px;top:-14px;color:#000;font-size:14px;border: 1px solid #e5e5e5;background-color:#f0f0f0; text-decoration:none;" class="uploadFileRemove">删除</a><img src="'+str+'" width="100px" height="100px"><input type="hidden" name="uploadFilePath" value="'+str+'"></div>').insertBefore('#uploadFileList .clearfix');
				}
			}

			$(function () {
				$('#uploadFileList').on('click', '.uploadFileRemove', function () {
					var el = $(this);
					el.parent().remove();
				}).on('mouseover',  '.img-box', function () {
					var el = $(this);
					$('.uploadFileRemove', el).show();
				}).on('mouseout', '.img-box', function () {
					var el = $(this);
					$('.uploadFileRemove', el).hide();
				});


			});

	</script>
	<div id="uploadFileList" style="width:550px;border: 1px solid #ccc;min-height: 120px;">
		<div style="clear:both;" class="clearfix"></div>
	</div>
</body>
</html>
